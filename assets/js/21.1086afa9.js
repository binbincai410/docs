(window.webpackJsonp=window.webpackJsonp||[]).push([[21],{395:function(a,e,t){"use strict";t.r(e);var s=t(26),r=Object(s.a)({},(function(){var a=this,e=a.$createElement,t=a._self._c||e;return t("ContentSlotsDistributor",{attrs:{"slot-key":a.$parent.slotKey}},[t("h1",{attrs:{id:"簽名認證"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#簽名認證"}},[a._v("#")]),a._v(" 簽名認證")]),a._v(" "),t("h2",{attrs:{id:"創建api"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#創建api"}},[a._v("#")]),a._v(" 創建API")]),a._v(" "),t("p",[a._v("在對任何請求進行簽名之前，您必須通過 Bingbon 網站【用戶中心】-【API管理(專業合約)】創建一個API key。 創建key後，您將獲得2個必須記住的信息：")]),a._v(" "),t("ul",[t("li",[a._v("API Key")]),a._v(" "),t("li",[a._v("Secret Key")])]),a._v(" "),t("p",[a._v("API Key 和 Secret Key將由隨機生成和提供。")]),a._v(" "),t("h2",{attrs:{id:"請求內容"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#請求內容"}},[a._v("#")]),a._v(" 請求內容")]),a._v(" "),t("p",[a._v("所有REST請求都必須包含以下參數：")]),a._v(" "),t("ul",[t("li",[a._v("API Key作為一個字元串。")]),a._v(" "),t("li",[a._v("sign 使用一定演算法得出的簽名（請參閱簽名信息）。")]),a._v(" "),t("li",[a._v("timestamp 作為您的請求的時間戳。")]),a._v(" "),t("li",[a._v("所有請求都應該含有application/json類型內容，並且是有效的JSON。")])]),a._v(" "),t("h2",{attrs:{id:"簽名說明"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#簽名說明"}},[a._v("#")]),a._v(" 簽名說明")]),a._v(" "),t("p",[a._v("sign 是對http method，url path，請求參數等按字元串連接之後使用 "),t("strong",[a._v("HMAC SHA256")]),a._v(" 方法加密而得到的。")]),a._v(" "),t("ul",[t("li",[a._v("path 為URL的請求路徑，例如: /api/v1/user/getBalance")]),a._v(" "),t("li",[a._v("method 是請求方法(POST/GET/PUT/DELETE)，字母全部大寫。")]),a._v(" "),t("li",[a._v("參數是對 "),t("strong",[a._v("所有參數(含timestamp)按照字典排序之後，按照key1=value1 + key2=value2 ... + Secret Key")]),a._v(" 字元串(+表示字元串連接)。")])]),a._v(" "),t("p",[a._v("originString = method + path + params\nsign = HmacSHA256(originString)")]),a._v(" "),t("p",[t("strong",[a._v("例如：對於如下的請求參數進行簽名")])]),a._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[a._v("curl")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('"https://api-swap-rest.bingbon.pro/api/v1/user/getBalance"')]),a._v("\n      \n")])])]),t("ul",[t("li",[a._v("通過POST方式獲取獲取用戶某資產餘額信息，以 apiKey=Zsm4DcrHBTewmVaElrdwA67PmivPv6VDK6JAkiECZ9QfcUnmn67qjCOgvRuZVOzU, secretKey=UuGuyEGt6ZEkpUObCYCmIfh0elYsZVh80jlYwpJuRZEw70t6vomMH7Sjmf94ztSI 為例")])]),a._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[a._v("timestamp = 1615272721001\napiKey = Zsm4DcrHBTewmVaElrdwA67PmivPv6VDK6JAkiECZ9QfcUnmn67qjCOgvRuZVOzU\ncurrency = USDT\n")])])]),t("p",[a._v("請求參數按字典排序之後，為")]),a._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[a._v("apiKey = Zsm4DcrHBTewmVaElrdwA67PmivPv6VDK6JAkiECZ9QfcUnmn67qjCOgvRuZVOzU\ncurrency = USDT\ntimestamp = 1615272721001\n")])])]),t("p",[a._v("mothod為POST，path為/api/v1/user/getBalance，生成待簽名的參數字元串如下:")]),a._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[a._v("paramString = 'apiKey=Zsm4DcrHBTewmVaElrdwA67PmivPv6VDK6JAkiECZ9QfcUnmn67qjCOgvRuZVOzU&currency=USDT&timestamp=1615272721001'\n\n")])])]),t("p",[a._v("按演算法生成待簽名的字元串")]),a._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[a._v("originString = 'POST/api/v1/user/getBalanceapiKey=Zsm4DcrHBTewmVaElrdwA67PmivPv6VDK6JAkiECZ9QfcUnmn67qjCOgvRuZVOzU&currency=USDT&timestamp=1615272721001'\n  \n")])])]),t("p",[a._v("然後，將待簽名字元串添加私鑰參數生成最終待簽名字元串。")]),a._v(" "),t("p",[a._v("例如：")]),a._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[a._v('Signature = HmacSHA256(secretkey, originString)\nSignature = Base64Encode(Signature)\nSignature = UrlEncode(Signature)\n\n即：\nSignature = HmacSHA256("UuGuyEGt6ZEkpUObCYCmIfh0elYsZVh80jlYwpJuRZEw70t6vomMH7Sjmf94ztSI", "POST/api/v1/user/getBalanceapiKey=Zsm4DcrHBTewmVaElrdwA67PmivPv6VDK6JAkiECZ9QfcUnmn67qjCOgvRuZVOzU&currency=USDT&timestamp=1616488398013")\n\necho -n "POST/api/v1/user/getBalanceapiKey=Zsm4DcrHBTewmVaElrdwA67PmivPv6VDK6JAkiECZ9QfcUnmn67qjCOgvRuZVOzU&currency=USDT&timestamp=1616488398013" | openssl dgst -sha256 -hmac "UuGuyEGt6ZEkpUObCYCmIfh0elYsZVh80jlYwpJuRZEw70t6vomMH7Sjmf94ztSI" -binary | base64 | xargs python2.7 -c \'import sys, urllib;print(urllib.quote(sys.argv[1]))\'\n\n')])])]),t("p",[a._v("Signature的結果為S7Ok3L5ROXSbYfXj9ryeBbKfRosh9tmH%2FAKiwj7eAoc%3D，則簽名之後的url query參數為")]),a._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[a._v('apiKey = Zsm4DcrHBTewmVaElrdwA67PmivPv6VDK6JAkiECZ9QfcUnmn67qjCOgvRuZVOzU\ncurrency = USDT\ntimestamp = 1616488398013\nsign = S7Ok3L5ROXSbYfXj9ryeBbKfRosh9tmH%2FAKiwj7eAoc%3D\n\n即最終發送給伺服器的API請求應該為：\n"https://api-swap-rest.bingbon.pro/api/v1/user/getBalance?apiKey=Zsm4DcrHBTewmVaElrdwA67PmivPv6VDK6JAkiECZ9QfcUnmn67qjCOgvRuZVOzU&currency=USDT&timestamp=1616488398013&sign=S7Ok3L5ROXSbYfXj9ryeBbKfRosh9tmH%2FAKiwj7eAoc%3D"\n\n')])])]),t("h2",{attrs:{id:"請求交互"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#請求交互"}},[a._v("#")]),a._v(" 請求交互")]),a._v(" "),t("p",[a._v("REST訪問的根URL："),t("code",[a._v("https://api-swap-rest.bingbon.pro")])]),a._v(" "),t("p",[a._v("所有請求基於Https協議，請求頭信息中Content-Type 需要統一設置為:'application/json』。")]),a._v(" "),t("p",[t("strong",[a._v("請求交互說明")])]),a._v(" "),t("p",[a._v("1、請求參數：根據介面請求參數規定進行參數封裝。")]),a._v(" "),t("p",[a._v("2、提交請求參數：將封裝好的請求參數通過POST/GET/DELETE等方式提交至伺服器。")]),a._v(" "),t("p",[a._v("3、伺服器響應：伺服器首先對用戶請求數據進行參數安全校驗，通過校驗後根據業務邏輯將響應數據以JSON格式返回給用戶。")]),a._v(" "),t("p",[a._v("4、數據處理：對伺服器響應數據進行處理。")]),a._v(" "),t("p",[t("strong",[a._v("成功")])]),a._v(" "),t("p",[a._v("HTTP狀態碼200表示成功響應，並可能包含內容。如果響應含有內容，則將顯示在相應的返回內容裡面。")])])}),[],!1,null,null,null);e.default=r.exports}}]);