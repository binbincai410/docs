(window.webpackJsonp=window.webpackJsonp||[]).push([[31],{407:function(a,e,t){"use strict";t.r(e);var s=t(26),r=Object(s.a)({},(function(){var a=this,e=a.$createElement,t=a._self._c||e;return t("ContentSlotsDistributor",{attrs:{"slot-key":a.$parent.slotKey}},[t("h1",{attrs:{id:"签名认证"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#签名认证"}},[a._v("#")]),a._v(" 签名认证")]),a._v(" "),t("h2",{attrs:{id:"创建api"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#创建api"}},[a._v("#")]),a._v(" 创建API")]),a._v(" "),t("p",[a._v("在对任何请求进行签名之前，您必须通过 Bingbon 网站【用户中心】-【API管理(专业合约)】创建一个API key。 创建key后，您将获得2个必须记住的信息：")]),a._v(" "),t("ul",[t("li",[a._v("API Key")]),a._v(" "),t("li",[a._v("Secret Key")])]),a._v(" "),t("p",[a._v("API Key 和 Secret Key将由随机生成和提供。")]),a._v(" "),t("h2",{attrs:{id:"请求内容"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#请求内容"}},[a._v("#")]),a._v(" 请求内容")]),a._v(" "),t("p",[a._v("所有REST请求都必须包含以下参数：")]),a._v(" "),t("ul",[t("li",[a._v("API Key作为一个字符串。")]),a._v(" "),t("li",[a._v("sign 使用一定算法得出的签名（请参阅签名信息）。")]),a._v(" "),t("li",[a._v("timestamp 作为您的请求的时间戳。")]),a._v(" "),t("li",[a._v("所有请求都应该含有application/json类型内容，并且是有效的JSON。")])]),a._v(" "),t("h2",{attrs:{id:"签名说明"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#签名说明"}},[a._v("#")]),a._v(" 签名说明")]),a._v(" "),t("p",[a._v("sign 是对http method，url path，请求参数等按字符串连接之后使用 "),t("strong",[a._v("HMAC SHA256")]),a._v(" 方法加密而得到的。")]),a._v(" "),t("ul",[t("li",[a._v("path 为URL的请求路径，例如: /api/v1/user/getBalance")]),a._v(" "),t("li",[a._v("method 是请求方法(POST/GET/PUT/DELETE)，字母全部大写。")]),a._v(" "),t("li",[a._v("参数是对 "),t("strong",[a._v("所有参数(含timestamp)按照字典排序之后，按照key1=value1 + key2=value2 ... + Secret Key")]),a._v(" 字符串(+表示字符串连接)。")])]),a._v(" "),t("p",[a._v("originString = method + path + params\nsign = HmacSHA256(originString)")]),a._v(" "),t("p",[t("strong",[a._v("例如：对于如下的请求参数进行签名")])]),a._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[a._v("curl")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('"https://api-swap-rest.bingbon.pro/api/v1/user/getBalance"')]),a._v("\n      \n")])])]),t("ul",[t("li",[a._v("通过POST方式获取获取用户某资产余额信息，以 apiKey=Zsm4DcrHBTewmVaElrdwA67PmivPv6VDK6JAkiECZ9QfcUnmn67qjCOgvRuZVOzU, secretKey=UuGuyEGt6ZEkpUObCYCmIfh0elYsZVh80jlYwpJuRZEw70t6vomMH7Sjmf94ztSI 为例")])]),a._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[a._v("timestamp = 1615272721001\napiKey = Zsm4DcrHBTewmVaElrdwA67PmivPv6VDK6JAkiECZ9QfcUnmn67qjCOgvRuZVOzU\ncurrency = USDT\n")])])]),t("p",[a._v("请求参数按字典排序之后，为")]),a._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[a._v("apiKey = Zsm4DcrHBTewmVaElrdwA67PmivPv6VDK6JAkiECZ9QfcUnmn67qjCOgvRuZVOzU\ncurrency = USDT\ntimestamp = 1615272721001\n")])])]),t("p",[a._v("mothod为POST，path为/api/v1/user/getBalance，生成待签名的参数字符串如下:")]),a._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[a._v("paramString = 'apiKey=Zsm4DcrHBTewmVaElrdwA67PmivPv6VDK6JAkiECZ9QfcUnmn67qjCOgvRuZVOzU&currency=USDT&timestamp=1615272721001'\n\n")])])]),t("p",[a._v("按算法生成待签名的字符串")]),a._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[a._v("originString = 'POST/api/v1/user/getBalanceapiKey=Zsm4DcrHBTewmVaElrdwA67PmivPv6VDK6JAkiECZ9QfcUnmn67qjCOgvRuZVOzU&currency=USDT&timestamp=1615272721001'\n  \n")])])]),t("p",[a._v("然后，将待签名字符串添加私钥参数生成最终待签名字符串。")]),a._v(" "),t("p",[a._v("例如：")]),a._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[a._v('Signature = HmacSHA256(secretkey, originString)\nSignature = Base64Encode(Signature)\nSignature = UrlEncode(Signature)\n\n即：\nSignature = HmacSHA256("UuGuyEGt6ZEkpUObCYCmIfh0elYsZVh80jlYwpJuRZEw70t6vomMH7Sjmf94ztSI", "POST/api/v1/user/getBalanceapiKey=Zsm4DcrHBTewmVaElrdwA67PmivPv6VDK6JAkiECZ9QfcUnmn67qjCOgvRuZVOzU&currency=USDT&timestamp=1616488398013")\n\necho -n "POST/api/v1/user/getBalanceapiKey=Zsm4DcrHBTewmVaElrdwA67PmivPv6VDK6JAkiECZ9QfcUnmn67qjCOgvRuZVOzU&currency=USDT&timestamp=1616488398013" | openssl dgst -sha256 -hmac "UuGuyEGt6ZEkpUObCYCmIfh0elYsZVh80jlYwpJuRZEw70t6vomMH7Sjmf94ztSI" -binary | base64 | xargs python2.7 -c \'import sys, urllib;print(urllib.quote(sys.argv[1]))\'\n\n')])])]),t("p",[a._v("Signature的结果为S7Ok3L5ROXSbYfXj9ryeBbKfRosh9tmH%2FAKiwj7eAoc%3D，则签名之后的url query参数为")]),a._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[a._v('apiKey = Zsm4DcrHBTewmVaElrdwA67PmivPv6VDK6JAkiECZ9QfcUnmn67qjCOgvRuZVOzU\ncurrency = USDT\ntimestamp = 1616488398013\nsign = S7Ok3L5ROXSbYfXj9ryeBbKfRosh9tmH%2FAKiwj7eAoc%3D\n\n即最终发送给服务器的API请求应该为：\n"https://api-swap-rest.bingbon.pro/api/v1/user/getBalance?apiKey=Zsm4DcrHBTewmVaElrdwA67PmivPv6VDK6JAkiECZ9QfcUnmn67qjCOgvRuZVOzU&currency=USDT&timestamp=1616488398013&sign=S7Ok3L5ROXSbYfXj9ryeBbKfRosh9tmH%2FAKiwj7eAoc%3D"\n\n')])])]),t("h2",{attrs:{id:"请求交互"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#请求交互"}},[a._v("#")]),a._v(" 请求交互")]),a._v(" "),t("p",[a._v("REST访问的根URL："),t("code",[a._v("https://api-swap-rest.bingbon.pro")])]),a._v(" "),t("p",[a._v("所有请求基于Https协议，请求头信息中Content-Type 需要统一设置为:'application/json’。")]),a._v(" "),t("p",[t("strong",[a._v("请求交互说明")])]),a._v(" "),t("p",[a._v("1、请求参数：根据接口请求参数规定进行参数封装。")]),a._v(" "),t("p",[a._v("2、提交请求参数：将封装好的请求参数通过POST/GET/DELETE等方式提交至服务器。")]),a._v(" "),t("p",[a._v("3、服务器响应：服务器首先对用户请求数据进行参数安全校验，通过校验后根据业务逻辑将响应数据以JSON格式返回给用户。")]),a._v(" "),t("p",[a._v("4、数据处理：对服务器响应数据进行处理。")]),a._v(" "),t("p",[t("strong",[a._v("成功")])]),a._v(" "),t("p",[a._v("HTTP状态码200表示成功响应，并可能包含内容。如果响应含有内容，则将显示在相应的返回内容里面。")])])}),[],!1,null,null,null);e.default=r.exports}}]);